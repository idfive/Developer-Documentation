<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-back-end/drupal/drupal-sitebuilding" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Drupal Site Building | idfive Developer Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developers.idfive.com/img/idfive-docusaurus-preview-image.png"><meta data-rh="true" name="twitter:image" content="https://developers.idfive.com/img/idfive-docusaurus-preview-image.png"><meta data-rh="true" property="og:url" content="https://developers.idfive.com/docs/back-end/drupal/drupal-sitebuilding"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Drupal Site Building | idfive Developer Documentation"><meta data-rh="true" name="description" content="General Requirements/Best Practices"><meta data-rh="true" property="og:description" content="General Requirements/Best Practices"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://developers.idfive.com/docs/back-end/drupal/drupal-sitebuilding"><link data-rh="true" rel="alternate" href="https://developers.idfive.com/docs/back-end/drupal/drupal-sitebuilding" hreflang="en"><link data-rh="true" rel="alternate" href="https://developers.idfive.com/docs/back-end/drupal/drupal-sitebuilding" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://2PJMDLEUFN-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="idfive Developer Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.c974dea1.css">
<script src="/assets/js/runtime~main.755478b9.js" defer="defer"></script>
<script src="/assets/js/main.b15b3c7e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo-idfive.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-idfive.svg" alt="idfive Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-idfive.svg" alt="idfive Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/category/general">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/general">General</a><button aria-label="Expand sidebar category &#x27;General&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/front-end">Front End</a><button aria-label="Expand sidebar category &#x27;Front End&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/support">Support</a><button aria-label="Expand sidebar category &#x27;Support&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/accelerator">Accelerator</a><button aria-label="Expand sidebar category &#x27;Accelerator&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/back-end">Back End</a><button aria-label="Collapse sidebar category &#x27;Back End&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/drupal">Drupal</a><button aria-label="Collapse sidebar category &#x27;Drupal&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-caching">Caching in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-config-management">Configuration Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-entities">Entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-entity-queries">Entity queries in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-environment">idfive drupal environment and common setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-feeds">Feeds module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-field-snippets">Drupal Field Snippets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-helpfull-commands">Helpful Drupal Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-hybrid-content-types">Hybrid Content Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-js">Javascript and drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-legacy">Drupal 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-performance">Drupal Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-rest-custom">Custom REST endpoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-services">Drupal 8 Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-seven-migration">Seven to 9 migration locally via lando</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-simple-password-protection">Simple (per page) password protection in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-simplesamlphp-password-protection">Simplesamlphp (per page) password protection in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/back-end/drupal/drupal-sitebuilding">Drupal Site Building</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-social-share">Drupal Social Share</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-testing">Testing in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-updates">Drupal Updates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-users-roles">Drupal Users and Roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-views">Drupal Views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal">Drupal 8 General Codebase</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/php">PHP</a><button aria-label="Expand sidebar category &#x27;PHP&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/terminalfour-t4">TerminalFour (T4)</a><button aria-label="Expand sidebar category &#x27;TerminalFour (T4)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/wordpress">Wordpress</a><button aria-label="Expand sidebar category &#x27;Wordpress&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/challenges">Challenges</a><button aria-label="Expand sidebar category &#x27;Challenges&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/back-end"><span itemprop="name">Back End</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/drupal"><span itemprop="name">Drupal</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Drupal Site Building</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Drupal Site Building</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="general-requirementsbest-practices">General Requirements/Best Practices<a href="#general-requirementsbest-practices" class="hash-link" aria-label="Direct link to General Requirements/Best Practices" title="Direct link to General Requirements/Best Practices">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="settingsphp">settings.php<a href="#settingsphp" class="hash-link" aria-label="Direct link to settings.php" title="Direct link to settings.php">​</a></h3>
<ul>
<li>A more advanced and awesome way of setting up settings.php can be seen in <a href="https://vimeo.com/840496602/994689054a?share=copy" target="_blank" rel="noopener noreferrer">Multisite Config 201</a>.</li>
<li>Always remove commented-out example code when possible. This example code is always still available at default.settings.php, but removing it from settings.php makes the file more condensed, and it is easier to see what is actually being used.</li>
<li>Always, if needed, include a settings.local.php, so that your local dev env can run differently: <code>if (file_exists($app_root . &#x27;/&#x27; . $site_path . &#x27;/settings.local.php&#x27;)) { include $app_root . &#x27;/&#x27; . $site_path . &#x27;/settings.local.php&#x27;; }</code></li>
<li>Be sure <code>docroot/sites/*/settings.local.php</code> is in the .gitignore.</li>
<li>Mostly, this will allow caches/aggregation/etc to be disabled for easier developing.</li>
<li>For things like acquia multi-sites, this can also be set in settings.php in a conditional block, as an include to development.settings.php, so that all local sites get it.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-settingsphp-acquia-multi-site-conditional">Example settings.php acquia multi-site conditional<a href="#example-settingsphp-acquia-multi-site-conditional" class="hash-link" aria-label="Direct link to Example settings.php acquia multi-site conditional" title="Direct link to Example settings.php acquia multi-site conditional">​</a></h4>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  // Check/modify any acquia environment-specific modifications needed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if (isset($_ENV[&#x27;AH_SITE_ENVIRONMENT&#x27;])) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Acquia specific stuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Do something for a non-Acquia-hosted application, ie, load local dev settings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (file_exists($app_root . &#x27;/sites/development.settings.php&#x27;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      include $app_root . &#x27;/sites/development.settings.php&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By loading in this way (globally for all local sites), all local dev sites get more &quot;dev env&quot; settings, and you can still use settings.local.php for any changes needed to the local settings.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-settingslocalphp-or-developmentsettingsphp">Example settings.local.php, or development.settings.php<a href="#example-settingslocalphp-or-developmentsettingsphp" class="hash-link" aria-label="Direct link to Example settings.local.php, or development.settings.php" title="Direct link to Example settings.local.php, or development.settings.php">​</a></h4>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // @codingStandardsIgnoreFile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * @file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Local development override configuration feature.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $settings[&#x27;container_yamls&#x27;][] = DRUPAL_ROOT . &#x27;/sites/development.services.yml&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $config[&#x27;system.logging&#x27;][&#x27;error_level&#x27;] = &#x27;verbose&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $config[&#x27;system.performance&#x27;][&#x27;css&#x27;][&#x27;preprocess&#x27;] = FALSE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $config[&#x27;system.performance&#x27;][&#x27;js&#x27;][&#x27;preprocess&#x27;] = FALSE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $settings[&#x27;cache&#x27;][&#x27;bins&#x27;][&#x27;render&#x27;] = &#x27;cache.backend.null&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $settings[&#x27;cache&#x27;][&#x27;bins&#x27;][&#x27;page&#x27;] = &#x27;cache.backend.null&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $settings[&#x27;rebuild_access&#x27;] = TRUE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $settings[&#x27;skip_permissions_hardening&#x27;] = TRUE;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="servicesyml">services.yml<a href="#servicesyml" class="hash-link" aria-label="Direct link to services.yml" title="Direct link to services.yml">​</a></h3>
<p>When possible, always add a development services.yml to the codebase. This will set up the local dev env to show twig templates/etc, and make it easier to develop.</p>
<ul>
<li>Be sure it is in the &#x27;/docroot/sites/development.services.yml&#x27; or similar, so it may be used across multi-sites.</li>
<li>Be sure <code>$settings[&#x27;container_yamls&#x27;][] = DRUPAL_ROOT . &#x27;/sites/development.services.yml&#x27;;</code>, with the proper path, is set in the settings.local.php. For multi-sites, especially on acquia, this can also be set in development.settings.php.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-developmentservicesyml">Example development.services.yml<a href="#example-developmentservicesyml" class="hash-link" aria-label="Direct link to Example development.services.yml" title="Direct link to Example development.services.yml">​</a></h4>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # Local development services.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # To activate this feature, follow the instructions at the top of the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # &#x27;example.settings.local.php&#x27; file, which sits next to this file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  parameters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http.response.debug_cacheability_headers: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    twig.config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      debug: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      auto_reload: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cache: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cache.backend.null:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      class: Drupal\Core\Cache\NullBackendFactory</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="redirects">Redirects<a href="#redirects" class="hash-link" aria-label="Direct link to Redirects" title="Direct link to Redirects">​</a></h4>
<p>If possible, high-level URL redirects should be performed via settings.php, not in .htaccess. This is because .htaccess has the potential to be overridden during core updates.</p>
<ul>
<li>All minor &quot;old page to new page&quot; redirects should be done via the redirect module.</li>
<li>This is for high-level changes, like &quot;x.mysite.edu and y.mysite.edu should all redirect to z.mysite.edu&quot;.</li>
<li>Be sure to wrap in a check for drush, so that drush requests are not redirected, via <code>if (!function_exists(&#x27;drush_main&#x27;)) {}</code>.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="example-on-acquia">Example on acquia<a href="#example-on-acquia" class="hash-link" aria-label="Direct link to Example on acquia" title="Direct link to Example on acquia">​</a></h5>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Check/modify any acquia environment-specific modifications needed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (isset($_ENV[&#x27;AH_SITE_ENVIRONMENT&#x27;])) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  switch ($_ENV[&#x27;AH_SITE_ENVIRONMENT&#x27;]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case &#x27;prod&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (!function_exists(&#x27;drush_main&#x27;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if ($_SERVER[&#x27;HTTP_HOST&#x27;] != &#x27;MYSITE.com&#x27;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          header(&#x27;HTTP/1.0 301 Moved Permanently&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          header(&#x27;Location: https://&#x27; . &#x27;MYSITE.com&#x27; . $_SERVER[&#x27;REQUEST_URI&#x27;]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          exit();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="idfive-base-theme">idfive base theme<a href="#idfive-base-theme" class="hash-link" aria-label="Direct link to idfive base theme" title="Direct link to idfive base theme">​</a></h2>
<p>The idfive base theme is intentionally pretty bare bones, but provides us with lots of behind the scenes functions we need. This theme is designed to act as a parent theme and should never be enabled directly. See the <a href="https://bitbucket.org/idfivellc/idfive-component-library-d8-theme" target="_blank" rel="noopener noreferrer">documentation</a> for how to best use this theme and how to quickly and efficiently spin up a child theme for any client project.</p>
<p>It uses the core stable theme as a base (Drupal assigns this automatically to all themes that do not specify a base). This is to ensure some level of backwards template compatibility throughout the Drupal life cycle.</p>
<p>The docroot and actual folders may vary, depending on your codebase, but in general, adding the idfive base theme, and creating your custom child theme will look like:</p>
<ul>
<li><code>composer require idfive/idfive</code></li>
<li><code>cd docroot/themes/custom/idfive/starterkits</code></li>
<li><code>sudo bash generate_kit.sh</code> This will run a bash script that prompts you for a human-readable name and a machine name for your custom child theme. From that, the script will generate a child theme and install a fresh copy of the <a href="https://bitbucket.org/idfivellc/idfive-component-library" target="_blank" rel="noopener noreferrer">idfive Component Libray</a>, which is the preferred framework for all idfive projects.</li>
<li>Enable your new child theme.</li>
<li>You will need to adjust .gitignore in the idfive-component-library to track the &quot;build&quot; folder if no CI is used.</li>
</ul>
<p>You may need to adjust folders/etc as stated above, depending on the project&#x27;s composer setup. See the <a href="https://bitbucket.org/idfivellc/idfive-component-library-d8-theme" target="_blank" rel="noopener noreferrer">documentation</a> for more information.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="idfive-base-theme-via-the-ial">idfive base theme via the IAL<a href="#idfive-base-theme-via-the-ial" class="hash-link" aria-label="Direct link to idfive base theme via the IAL" title="Direct link to idfive base theme via the IAL">​</a></h3>
<p>Install the <a href="https://bitbucket.org/idfivellc/idfive-automation-library" target="_blank" rel="noopener noreferrer">idfive Automation Library</a> and run the <a href="https://bitbucket.org/idfivellc/idfive-automation-library/src/master/drupal/general/partials/add_icl_theme.sh" target="_blank" rel="noopener noreferrer">Add ICL Theme</a> script.</p>
<ul>
<li><code>sh ~/Sites/_ial/drupal/general/partials/add_icl_theme.sh &quot;YOUR CHILD THEME HR NAME&quot; YOUR_CHILD_THEME_MACHINE_NAME</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="idfive-icl-paragraphs-module">idfive ICL paragraphs module<a href="#idfive-icl-paragraphs-module" class="hash-link" aria-label="Direct link to idfive ICL paragraphs module" title="Direct link to idfive ICL paragraphs module">​</a></h2>
<p>The <a href="https://bitbucket.org/idfivellc/idfive-component-library-d8-paragraphs" target="_blank" rel="noopener noreferrer">idfive Component Library D8 Paragraphs</a> module, provides several common idfive ICL patterns as pre-made widgets to add to a Kitchen Sink page.</p>
<p>The docroot and actual folders may vary, depending on your codebase, but in general, adding the idfive ICL Paragraphs widget is best done via composer:</p>
<ul>
<li><code>composer require idfive/idfive_paragraphs</code></li>
<li>Add a paragraphs field to desired content, be sure the widget is &quot;Paragraphs Experimental&quot; in the form display.</li>
<li>Be sure to exclude certain ICL widget types so marked in their descriptions from this field.</li>
</ul>
<p>This is intentionally bare bones and simply designed to save time by adding a suite of common KS widgets from the ICL, such as tables accordions/etc.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extending-icl-paragraphs">Extending ICL paragraphs<a href="#extending-icl-paragraphs" class="hash-link" aria-label="Direct link to Extending ICL paragraphs" title="Direct link to Extending ICL paragraphs">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sectionwidget-wrappers">Section/widget wrappers<a href="#sectionwidget-wrappers" class="hash-link" aria-label="Direct link to Section/widget wrappers" title="Direct link to Section/widget wrappers">​</a></h4>
<p>The preferred method for adding wrappers, ie, sections, or whatever, to ICL widgets, is with a field template override of the field used to add the widgets. This lets us change per content type/etc if needed.</p>
<p>For example, if KS widgets are being added via <code>field_basic_page_ks_widgets</code>, field--node--field_basic_page_ks_widgets.html.twig could have the following:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{% for item in items %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    set classes = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &#x27;section&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &#x27;section-&#x27; ~ element[&#x27;#bundle&#x27;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &#x27;section-&#x27; ~ item.content[&#x27;#paragraph&#x27;].getType()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;{{ classes|join(&#x27; &#x27;) }}&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {{ item.content }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endfor %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This would result in an output of <code>&lt;div class=&quot;section section-basic_page section-PARAGRAPH_TYPE&quot;&gt;</code> as a wrapper for each widget.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-contrib-modules">Recommended contrib modules<a href="#recommended-contrib-modules" class="hash-link" aria-label="Direct link to Recommended contrib modules" title="Direct link to Recommended contrib modules">​</a></h2>
<p>See the <a href="https://bitbucket.org/idfivellc/idfive-automation-library" target="_blank" rel="noopener noreferrer">idfive Automation Library</a> script, <a href="https://bitbucket.org/idfivellc/idfive-automation-library/src/master/drupal/general/partials/add_icl_modules.sh" target="_blank" rel="noopener noreferrer">Add ICL Modules</a> for an up to date list of what idfive recommends as a baseline.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-contrib-modules-via-the-ial">Recommended contrib modules via the IAL<a href="#recommended-contrib-modules-via-the-ial" class="hash-link" aria-label="Direct link to Recommended contrib modules via the IAL" title="Direct link to Recommended contrib modules via the IAL">​</a></h3>
<p>Install the <a href="https://bitbucket.org/idfivellc/idfive-automation-library" target="_blank" rel="noopener noreferrer">idfive Automation Library</a> and run the <a href="https://bitbucket.org/idfivellc/idfive-automation-library/src/master/drupal/general/partials/enable_icl_modules.sh" target="_blank" rel="noopener noreferrer">Add ICL Modules</a> script.</p>
<ul>
<li><code>ssh ~/Sites/_ial/drupal/general/partials/add_icl_modules.sh</code></li>
<li>You may also then enable via <code>sh ~/Sites/_ial/drupal/general/partials/enable_icl_modules.sh</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-moduletheme-development">Custom Module/Theme Development<a href="#custom-moduletheme-development" class="hash-link" aria-label="Direct link to Custom Module/Theme Development" title="Direct link to Custom Module/Theme Development">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thememodule-best-practices">Theme/Module best practices<a href="#thememodule-best-practices" class="hash-link" aria-label="Direct link to Theme/Module best practices" title="Direct link to Theme/Module best practices">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="admin-ux">Admin UX<a href="#admin-ux" class="hash-link" aria-label="Direct link to Admin UX" title="Direct link to Admin UX">​</a></h4>
<p>When adding/arranging fields on entities and forms, give careful consideration to how things are ordered/labeled/layed out. It is extremely important that the admin UX be as clean, and straightforward as possible for admins to use the site effectively.</p>
<ul>
<li>Consider using field groups in display to group fields into collapsed details/fieldsets.</li>
<li>Consider setting up tabs for large, complex entities, with the tabs corresponding to naming seen on frontend sections.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="help-text">Help Text<a href="#help-text" class="hash-link" aria-label="Direct link to Help Text" title="Direct link to Help Text">​</a></h4>
<p>Help text is normally aimed at admins and site builders, and is necessary to provide a great admin experience. It is easy to overlook this, but it is the key to providing a great admin experience, and sometimes even for developers to more readily understand what is going on when revisiting older projects.</p>
<ul>
<li>All custom modules should, at a minimum utilize a <code>hook_help()</code> to show the modules (properly formatted) README.md.</li>
<li>Consider adding help text/etc to entity add/edit forms to explain how things work, and best practices.</li>
<li>Consider adding markup fields to entities (like a homepage) to explain how things &quot;not controlled within the form&quot; work, like feeds from views and external API&#x27;s. For example: &quot;The blogs feed displays the 3 most recent blog posts tagged with X&quot;.</li>
<li><a href="https://www.drupal.org/docs/develop/documenting-your-project/help-text-standards" target="_blank" rel="noopener noreferrer">drupal help text standards</a></li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="hook_help-example">Hook_help example<a href="#hook_help-example" class="hash-link" aria-label="Direct link to Hook_help example" title="Direct link to Hook_help example">​</a></h5>
<p>Displays the README.md as for the help page of a module. Loads markdown module for better formatting if present.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * My custom module file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Drupal\Core\Routing\RouteMatchInterface;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Implements hook_help().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @inheritdoc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function MY_MODULE_help($route_name, RouteMatchInterface $route_match) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  switch ($route_name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case &#x27;help.page.MY_MODULE&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $text = file_get_contents(dirname(__FILE__) . &quot;/README.md&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (!\Drupal::moduleHandler()-&gt;moduleExists(&#x27;markdown&#x27;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &#x27;&lt;pre&gt;&#x27; . $text . &#x27;&lt;/pre&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Use the Markdown filter to render the README.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $filter_manager = \Drupal::service(&#x27;plugin.manager.filter&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $settings = \Drupal::configFactory()-&gt;get(&#x27;markdown.settings&#x27;)-&gt;getRawData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $config = [&#x27;settings&#x27; =&gt; $settings];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $filter = $filter_manager-&gt;createInstance(&#x27;markdown&#x27;, $config);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $filter-&gt;process($text, &#x27;en&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return NULL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="hook_field_widget_type_paragraphs_form_alter">Hook_field_WIDGET_TYPE_paragraphs_form_alter<a href="#hook_field_widget_type_paragraphs_form_alter" class="hash-link" aria-label="Direct link to Hook_field_WIDGET_TYPE_paragraphs_form_alter" title="Direct link to Hook_field_WIDGET_TYPE_paragraphs_form_alter">​</a></h5>
<p>Provides customized help text for a custom paragraphs module, so that you may point clients in the right direction and provide tips, best practices, and context. To note the following only works with the new paragraphs display, if using legacy, you will need to change to the appropriate widget type in the following hook.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Implements hook_field_WIDGET_TYPE_paragraphs_form_alter().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Adds helper text to the paragraph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function MY_MODULE_field_widget_paragraphs_form_alter(&amp;$element, &amp;$form_state, $context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ($element[&#x27;#paragraph_type&#x27;] == &#x27;MY_PARAGRAPH&#x27;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Tips text from idfive.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $markup = &#x27;&lt;h3&gt;Do:&lt;/h3&gt;&lt;ul&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $markup .= &#x27;&lt;li&gt;&lt;strong&gt;Use blockquotes to break up long copy.&lt;/strong&gt; A brief quote can provide visual interest and offset larger text blocks.&lt;/li&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $markup .= &#x27;&lt;li&gt;&lt;strong&gt;Use plain text.&lt;/strong&gt; Avoid including links or other styled elements.&lt;/li&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $markup .= &#x27;&lt;/ul&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $markup .= &#x27;&lt;h3&gt;Do Not:&lt;/h3&gt;&lt;ul&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $markup .= &#x27;&lt;li&gt;&lt;strong&gt;Use an overly long quote.&lt;/strong&gt; Often block quotes use font sizes/weights that can be overwhelming if used for copy that is very long.&lt;/li&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $markup .= &#x27;&lt;li&gt;&lt;strong&gt;Place a blockquote as the last element on the page.&lt;/strong&gt;&lt;/li&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $markup .= &#x27;&lt;/ul&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $markup .= &#x27;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;/admin/help/MY_MODULE&quot;&gt;My Module Help&lt;/a&gt;&lt;/p&gt;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $element[&#x27;MY_PARAGRAPH_tips&#x27;] = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &#x27;#type&#x27; =&gt; &#x27;details&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &#x27;#title&#x27; =&gt; t(&#x27;MY_PARAGRAPH Content Tips&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &#x27;#weight&#x27; =&gt; -1000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $element[&#x27;MY_PARAGRAPH_tips&#x27;][&#x27;#markup&#x27;] = $markup;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="libraries">Libraries<a href="#libraries" class="hash-link" aria-label="Direct link to Libraries" title="Direct link to Libraries">​</a></h4>
<p>Most times, any custom css/js should be attached globally. There are a few instances where this may not be desireable, for instance if there were extremely large css/js files that only ran one specific function on specific pages, like a homepage.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="global-via-a-infoyml">Global, via a .info.yml<a href="#global-via-a-infoyml" class="hash-link" aria-label="Direct link to Global, via a .info.yml" title="Direct link to Global, via a .info.yml">​</a></h5>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MY_THEME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> theme</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> An amazingly awesome theme I just built.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 8.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">libraries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MY_THEME/something</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">homepage</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">specific</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="via-a-hook_preprocess">Via a hook_preprocess<a href="#via-a-hook_preprocess" class="hash-link" aria-label="Direct link to Via a hook_preprocess" title="Direct link to Via a hook_preprocess">​</a></h5>
<p>Choose this if you want to add to pages of multiple, types, maybe based on a URL path or the like.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function MY_THEME_preprocess_page(&amp;$variables) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Example of a check here, for front page, but could be anything.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ($variables[&#x27;is_front&#x27;] == TRUE) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $variables[&#x27;#attached&#x27;][&#x27;library&#x27;][] = &#x27;MY_THEME/something-homepage-specific&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="in-twig-template">In twig template<a href="#in-twig-template" class="hash-link" aria-label="Direct link to In twig template" title="Direct link to In twig template">​</a></h5>
<p>Use this if the library in question is only needed on this particular template, and no others. Specifically helpful for things like custom paragraphs.</p>
<div class="language-twig codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-twig codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{# only attach our library if this is node 1 #}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% if node.id == 1 %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {{ attach_library(&#x27;MY_THEME/something-homepage-specific&#x27;) }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endif %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="javascript-variables-from-the-server">Javascript variables from the server<a href="#javascript-variables-from-the-server" class="hash-link" aria-label="Direct link to Javascript variables from the server" title="Direct link to Javascript variables from the server">​</a></h4>
<p>Pass a dynamic value from the server (PHP) to client-side JavaScript using the drupalSettings library. Sometimes this is needed in order for some custom JS to run, but in general, shy away if possible.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function MY_THEME_page_attachments_alter(array &amp;$page) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // We&#x27;re going to pass along the user&#x27;s display name to our front-end code.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $account = \Drupal::currentUser();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ($account-&gt;isAuthenticated()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $page[&#x27;#attached&#x27;][&#x27;library&#x27;][] = &#x27;MY_THEME/my-custom-js&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // We pass along our dynamic value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // This will then be available in our JavaScript as drupalSettings.friendly.name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $page[&#x27;#attached&#x27;][&#x27;drupalSettings&#x27;][&#x27;MY_THEME&#x27;][&#x27;name&#x27;] = $account-&gt;getDisplayName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case <code>drupalSettings.MY_THEME.name</code> will now be available to the JavaScript file in our asset library.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter maybe-class-name">Drupal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">drupalSettings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MY_THEME</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> siteName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementsByClassName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;site-branding__name&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    siteName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementsByTagName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;h1&gt;Howdy, &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> drupalSettings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MY_THEME</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;!&lt;/h1&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Drupal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="images">Images<a href="#images" class="hash-link" aria-label="Direct link to Images" title="Direct link to Images">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="media-module">Media Module<a href="#media-module" class="hash-link" aria-label="Direct link to Media Module" title="Direct link to Media Module">​</a></h5>
<p>Core media module should be used for all D8 projects, unless there is a good reason not to.</p>
<ul>
<li>The <a href="https://bitbucket.org/idfivellc/idfive-component-library-d8-paragraphs" target="_blank" rel="noopener noreferrer">idfive Component Library D8 Paragraphs</a> module ships with several entity browsers. These should be used as the form display choice for media fields, as it narrows down by type, as well as adds an upload option.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="image-optimize">Image Optimize<a href="#image-optimize" class="hash-link" aria-label="Direct link to Image Optimize" title="Direct link to Image Optimize">​</a></h5>
<p>Use <a href="https://www.drupal.org/project/imageapi_optimize" target="_blank" rel="noopener noreferrer">ImageAPI Optimize</a> (<a href="https://www.drupal.org/project/imageapi_optimize_resmushit" target="_blank" rel="noopener noreferrer">re.Smush.it</a>, <a href="https://www.drupal.org/project/imageapi_optimize_tinypng" target="_blank" rel="noopener noreferrer">TinyPNG</a> or other services) to optimize images as they are uploaded and used in image styles. It is important that these be set up/enabled early so that all images uploaded can benefit from optimization throughout the build process.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="focal-point">Focal Point<a href="#focal-point" class="hash-link" aria-label="Direct link to Focal Point" title="Direct link to Focal Point">​</a></h5>
<p>Use the <a href="https://www.drupal.org/project/focal_point" target="_blank" rel="noopener noreferrer">Focal Point</a> module on projects when a single image may be used across multiple image styles/crops. Once installed:</p>
<ul>
<li>Change the widget of the media<!-- -->:image<!-- --> entity form display (<code>/admin/structure/media/manage/image/form-display</code>) to &quot;Image (Focal Point)&quot;.</li>
<li>For any image style you wish to use this feature on, adjust the effects to use either &quot;Focal Point Crop&quot; or &quot;Focal Point Scale and Crop&quot;.</li>
<li>Now when adding a media<!-- -->:image<!-- --> entity, you will be presented with the focal point thumbnail where you may define a focal point, and any image styles throughout the site that use a focal point effect, should be available via the &quot;preview&quot; link.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="lazy-loading">Lazy Loading<a href="#lazy-loading" class="hash-link" aria-label="Direct link to Lazy Loading" title="Direct link to Lazy Loading">​</a></h5>
<p>If the build uses the ICL, consider enabling the <a href="https://bitbucket.org/idfivellc/idfive-component-library-d8-paragraphs/src/8.x-2.x/modules/idfive_lazyload/" target="_blank" rel="noopener noreferrer">idfive Lazyload</a> module. Note: The lazyload JS must be in the theme for this to wok.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="image-styles">Image Styles<a href="#image-styles" class="hash-link" aria-label="Direct link to Image Styles" title="Direct link to Image Styles">​</a></h5>
<p>Image styles should be utilized for all images being output in a template. This allows us to set parameters for size/etc, as well as ImageApi Optimize.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="responsive-images">Responsive Images<a href="#responsive-images" class="hash-link" aria-label="Direct link to Responsive Images" title="Direct link to Responsive Images">​</a></h5>
<p>The core responsive images module helps us to define different image styles for different breakpoints. This does require custom config setup of breakpoints. See <a href="https://www.drupal.org/docs/8/theming-drupal-8/working-with-breakpoints-in-drupal-8" target="_blank" rel="noopener noreferrer">Working with Breakpoints</a>. This requires a bit of setup so should be defined/used for the larger hero images/etc, but may not make sense for &quot;All Images&quot;.</p>
<ul>
<li>Enable responsive image module.</li>
<li>Compile a list of breakpoints, usually by looking at the static frontend.</li>
<li>Create YOUR_THEME_OR_MODULE.breakpoints.yml utilizing the above, located in the root of the custom module or themes root folder, and clear cache.</li>
<li>Add a new desired responsive image style</li>
<li>Add new view mode for Image Media Type, as &quot;Responsive Image&quot;, using added breakpoints.</li>
<li>Set up display for image field in &quot;Responsive Image&quot; display to be Responsive Image, and the responsive image style you created.</li>
<li>Add media field of type image to content, under Manage display, choose Rendered entity &gt; Render as Responsive Image.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="example-theme_namebreakpointsyml">Example theme_name.breakpoints.yml<a href="#example-theme_namebreakpointsyml" class="hash-link" aria-label="Direct link to Example theme_name.breakpoints.yml" title="Direct link to Example theme_name.breakpoints.yml">​</a></h6>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">theme_name.imagesize.mobile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">label</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Mobile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mediaQuery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">multipliers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 1x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> THEME NAME Image Sizes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">theme_name.imagesize.tablet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">label</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Tablet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mediaQuery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;all and (min-width: 560px) and (max-width: 900px)&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">multipliers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 1x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> THEME NAME Image Sizes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">theme_name.imagesize.desktop</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">label</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Desktop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mediaQuery</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;all and (min-width: 901px)&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">multipliers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 1x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> THEME NAME Image Sizes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="metatags">Metatags<a href="#metatags" class="hash-link" aria-label="Direct link to Metatags" title="Direct link to Metatags">​</a></h4>
<p>Default metatags (from the metatags module) are usually fine. One caveat is the og<!-- -->:image<!-- --> tag.</p>
<ul>
<li>Consider adding a default social share image for the entire site.</li>
<li>Consider overriding that, or adding to, for content like news and events.</li>
<li>Since we use media module, utilize a token within the og<!-- -->:image<!-- --> metatag, like: <code>[node:MEDIA_FIELD_ON_NODE:entity:field_media_image:DESIRED_IMAGE_STYLE:url]</code></li>
<li>Multiple images may be added in this field, and the particular service (twitter/facebook/etc) will choose the one it wants, usually the largest. For this reason, be sure the chosen image style of the media field is physically larger than the site default share image.</li>
<li>A complete example for the og<!-- -->:image<!-- --> metatag field, could look like: <code>/themes/custom/MY_AWESOME_THEME/social/MY_AWESOME_SOCIAL_SHARE_DEFAULT.jpg, [node:field_featured_image:entity:field_media_image:large:url]</code>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="view-modes">View Modes<a href="#view-modes" class="hash-link" aria-label="Direct link to View Modes" title="Direct link to View Modes">​</a></h4>
<p>How an entity (such as content, a user , etc) is displayed, depends on the context in which it is shown. This context is known as a view mode. Examples of view modes for one content type (article) is:</p>
<ul>
<li>Full article</li>
<li>Teaser article view</li>
<li>Card article view</li>
</ul>
<p>The main idea being, in combined views of content, you can now say &quot;show me 3 articles that match XYZ, and display as cards&quot;. Now, when using  things like views, we don&#x27;t need to customize the output, we simply tell it which view mode to display.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="adding-view-modes">Adding view modes<a href="#adding-view-modes" class="hash-link" aria-label="Direct link to Adding view modes" title="Direct link to Adding view modes">​</a></h5>
<ul>
<li>View modes can be added <code>/admin/structure/display-modes/view</code>. Ideally, the names should span content types, so that something like a &quot;card view&quot; can be used for articles, events, etc.</li>
<li>On <code>/admin/structure/types/manage/MY_ENTITY/display</code>, under &quot;custom display settings&quot;, choose the desired view modes.</li>
<li>Configure the display of each view mode, for each desired entity.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="view-mode-templates">View mode templates<a href="#view-mode-templates" class="hash-link" aria-label="Direct link to View mode templates" title="Direct link to View mode templates">​</a></h5>
<p>Each view mode can get its own template within the theme. Generally, we prefer to group them by entity and bundle, so that all view modes for a particular entity/bundle are in the same folder within the theme. The naming convention is <code>ENTITY--BUNDLE--VIEW-MODE.html.twig</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NODE-TYPE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      node--NODE-TYPE--card.html.twig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      node--NODE-TYPE--teaser.html.twig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      node--NODE-TYPE.html.twig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="regions-and-blocks">Regions and blocks<a href="#regions-and-blocks" class="hash-link" aria-label="Direct link to Regions and blocks" title="Direct link to Regions and blocks">​</a></h4>
<p>In general, we prefer not to use blocks excessively in drupal sites. The blocks we generally use, are limited mainly to:</p>
<ul>
<li>Menu Blocks</li>
<li>Breadcrumbs</li>
<li>Main Content</li>
<li>Messages</li>
<li>Admin tabs (though the admin menu edit tab mods in the idfive theme mainly eliminate this need)</li>
</ul>
<p>We find that setting custom content (views/lists/related articles/etc) is better accomplished at the entity_preprocess level, and added to the templates, per entity type, where needed, rather than relying on lots of blocks.</p>
<p>With that in mind, since regions are mainly to hold blocks, regions within the theme are usually created in regards to where breadcrumbs, or menus need to be. As an example, the following regions are set in the <a href="https://bitbucket.org/idfivellc/idfive-component-library-d8-theme" target="_blank" rel="noopener noreferrer">idfive base theme</a>, and are a good example:</p>
<ul>
<li>primary_menu: &#x27;Primary menu&#x27;</li>
<li>secondary_menu: &#x27;Secondary menu&#x27;</li>
<li>utility_menu: &#x27;Utility menu&#x27;</li>
<li>breadcrumbs: &#x27;Breadcrumbs&#x27;</li>
<li>page_sidebar: &#x27;Page Sidebar&#x27;</li>
<li>content: &#x27;Content&#x27;</li>
<li>footer_menu: &#x27;Footer menu&#x27;</li>
</ul>
<p>It is also worth noting, that the <a href="https://bitbucket.org/idfivellc/idfive-component-library-d8-theme" target="_blank" rel="noopener noreferrer">idfive base theme</a> includes preprocess functions to make these regions available to the node template as well, so things like the sidebar, can be added in the node template, rather than page template, to simplify design ingestion.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scoping">Scoping<a href="#scoping" class="hash-link" aria-label="Direct link to Scoping" title="Direct link to Scoping">​</a></h4>
<p>In general, we want to scope most custom elements to the parent theme/module/etc, to include, but not limited to:</p>
<ul>
<li>Fields</li>
<li>Functions</li>
<li>Variables</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="fields">Fields<a href="#fields" class="hash-link" aria-label="Direct link to Fields" title="Direct link to Fields">​</a></h5>
<p>Fields should be scoped to the controlling entity. Fields can be shared in certain instances (like between sub-modules), but in that instance would be scoped to the parent module.
For example, a text field used by the &quot;CLIENT Paragraphs&quot; module, could be scoped as machine names:</p>
<ul>
<li><code>field_cp_text</code></li>
<li><code>cp_text</code></li>
<li><code>client_paragraphs_text</code></li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h5>
<p>Custom functions belonging to modules or themes should be scoped as &quot;underscore + module/theme name + description&quot;.
For example, custom functions in the &quot;CLIENT Paragraphs&quot; module, could be scoped as:</p>
<ul>
<li><code>_client_paragraphs_format_into_list</code></li>
<li><code>_client_paragraphs_get_external_news</code></li>
<li><code>_client_paragraphs_get_external_events</code></li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="variables">Variables<a href="#variables" class="hash-link" aria-label="Direct link to Variables" title="Direct link to Variables">​</a></h5>
<p>Custom variables should be scoped to the module/theme that creates them, and the entity that uses them.
For example, if I were getting a list of events for the homepage, my variable for that could be scoped as:</p>
<ul>
<li><code>cp_homepage_events</code></li>
<li><code>client_paragraphs_events_for_homepage</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="viewslists">Views/Lists<a href="#viewslists" class="hash-link" aria-label="Direct link to Views/Lists" title="Direct link to Views/Lists">​</a></h4>
<p>Preferably, all &quot;lists of content&quot; should use a view mode to display them. Ie, &quot;show me all content of type X, displayed as view mode &#x27;search result&#x27;&quot;</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="if-the-view-content-is-local-and-requires-filters">If the view content is local and requires filters<a href="#if-the-view-content-is-local-and-requires-filters" class="hash-link" aria-label="Direct link to If the view content is local and requires filters" title="Direct link to If the view content is local and requires filters">​</a></h5>
<ul>
<li>Consider using core views module, with an exposed form.</li>
<li>If more complex, consider using core views along with <a href="https://www.drupal.org/project/search_api" target="_blank" rel="noopener noreferrer">Search API module</a>.</li>
<li>For smaller, custom sortable views, consider a vue.js app, that interacts with the jsonapi endpoint or similar.</li>
</ul>
<p>If core views is used as a standalone, or with search API, be sure to crate the display type as &quot;block&quot; or similar (not page), so that these views can be inserted into standard KS pages using the ip_views_embed widget, thus allowing for custom text, headers, content, etc as well as the listing.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="if-the-view-content-is-local-does-not-require-filters">If the view content is local does not require filters<a href="#if-the-view-content-is-local-does-not-require-filters" class="hash-link" aria-label="Direct link to If the view content is local does not require filters" title="Direct link to If the view content is local does not require filters">​</a></h5>
<ul>
<li>Consider using core views module.</li>
<li>Consider a custom EntityQuery (with caching).</li>
<li>Consider using the hook_preprocess for the entity in question to add these programmatically rather than using something like blocks.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="views-example">Views example<a href="#views-example" class="hash-link" aria-label="Direct link to Views example" title="Direct link to Views example">​</a></h6>
<p>This shows a simple example of adding a created view to a page, after conditionally checking if it has results. Since views are already cached, there is no reason to add additional caching here. In this example,
we pass along the NID of the node as an additional var to the view, which is set up as a conditional filter in the view.</p>
<p>This then makes the variable  MY_VARIABLE  available in the node--bundle-name.html.twig template, or similar, which is the rendered view.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// From within hook_preprocess of choice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$variables[&#x27;MY_VARIABLE&#x27;] = _MY_MODULE_test_view_for_results($variables, &#x27;VIEW_MACHINE_NAME&#x27;, &#x27;VIEW_DISPLAY_MACHINE_NAME&#x27;, $nid);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Test views to see if they have results before displaying.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Function takes the variables array, the name of the view, the display machine name (ie. &#x27;page_1&#x27; or &#x27;block_1&#x27;) and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * any arguments to pass to the view (contextual filters/etc).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function _MY_MODULE_test_view_for_results($variables, $view, $tab, $var1 = null, $var2 = null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $test = views_get_view_result($view, $tab, $var1, $var2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if(count($test) &gt; 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return views_embed_view($view, $tab, $var1, $var2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Then in twig template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% if MY_VARIABLE %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {{ MY_VARIABLE }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endif %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="custom-cached-node-query">Custom cached node query<a href="#custom-cached-node-query" class="hash-link" aria-label="Direct link to Custom cached node query" title="Direct link to Custom cached node query">​</a></h6>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// From within hook_preprocess of choice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$variables[&#x27;MY_VARIABLES&#x27;] = _MY_MODULE_get_things();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Function to get nodes of type CONTENT_TYPE and sort by title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function _MY_MODULE_get_things() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ($cache = \Drupal::cache()-&gt;get(&#x27;MY_MODULE:get_things&#x27;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $cache-&gt;data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $storage = Drupal::getContainer()-&gt;get(&#x27;entity_type.manager&#x27;)-&gt;getStorage(&#x27;node&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $nids = $storage-&gt;getQuery();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $nids = $nids-&gt;condition(&#x27;type&#x27;, &#x27;CONTENT_TYPE&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -&gt;condition(&#x27;status&#x27;, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -&gt;sort(&#x27;title&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -&gt;execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $result = $storage-&gt;loadMultiple($nids);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ($result) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      \Drupal::cache()-&gt;set(&#x27;MY_MODULE:get_things&#x27;, $result, time() + 7200);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return $result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return NULL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="if-the-content-is-not-local">If the content is NOT local<a href="#if-the-content-is-not-local" class="hash-link" aria-label="Direct link to If the content is NOT local" title="Direct link to If the content is NOT local">​</a></h5>
<ul>
<li>A custom call to an API/etc will be needed.</li>
<li>Consider leveraging relevant composer based PHP libraries if possible</li>
<li>Consider caching all results.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="custom-api-call-example">Custom API Call example<a href="#custom-api-call-example" class="hash-link" aria-label="Direct link to Custom API Call example" title="Direct link to Custom API Call example">​</a></h6>
<p>This example passes a unique ID for the feed, but you would also likely pass parameters from custom fields/etc, to be able to reuse calls to the endpoint from multiple places. To note, external API calls may better be accomplished by writing a service, but the example below also works.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// From within hook_preprocess of choice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$variables[&#x27;MY_VARIABLES&#x27;] = _MY_MODULE_get_stuff(&#x27;UNIQUE_ID_FOR_THIS_CALL&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Function to test views to see if they have results before displaying</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function _MY_MODULE_get_stuff($id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ($cache = \Drupal::cache()-&gt;get(&#x27;MY_MODULE:get_stuff--&#x27; . $id)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $cache-&gt;data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $url = &quot;https://stuffendpoint/that/i/want&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $result = file_get_contents($url);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $result = json_decode($result, TRUE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $result = $result[&#x27;data&#x27;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ($result) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      \Drupal::cache()-&gt;set(&#x27;MY_MODULE:get_stuff--&#x27; . $id, $result, time() + 7200);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return $result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return NULL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Then in twig template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% if MY_VARIABLES %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {% for stuff in MY_VARIABLES %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;h3&gt;{{ stuff.title }}&lt;/h3&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {{ stuff.text }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {% endfor %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endif %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pathauto">Pathauto<a href="#pathauto" class="hash-link" aria-label="Direct link to Pathauto" title="Direct link to Pathauto">​</a></h4>
<p>When setting up aliases, it is sometimes required to check the &quot;generate alias&quot; box on existinng content. The easiest way to do so is via a DB update.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> use Drupal\pathauto\PathautoState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Update pathauto aliases for all Blog Posts.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function MY_MODULE_update_8001() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $entity_type = &#x27;node&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $entity_storage = \Drupal::entityTypeManager()-&gt;getStorage($entity_type);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $nodes = $entity_storage-&gt;loadMultiple();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foreach($nodes as $node) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if($node-&gt;bundle() == &#x27;MY_BUNDLE&#x27;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $node-&gt;path-&gt;pathauto = PathautoState::CREATE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $node-&gt;save();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prepping-to-shiplaunch">Prepping to ship/launch<a href="#prepping-to-shiplaunch" class="hash-link" aria-label="Direct link to Prepping to ship/launch" title="Direct link to Prepping to ship/launch">​</a></h3>
<p>Run through the entire idfive launch checklist for any site being launched by us. Additionally, consider the following:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dependencies">Dependencies<a href="#dependencies" class="hash-link" aria-label="Direct link to Dependencies" title="Direct link to Dependencies">​</a></h4>
<p>Does your custom module rely on other custom or contrib modules?</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> paragraphs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> SOME_OTHER_CUSTOM_MODULE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> link_attributes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="versioning">Versioning<a href="#versioning" class="hash-link" aria-label="Direct link to Versioning" title="Direct link to Versioning">​</a></h4>
<p>If committing custom modules/themes for eventual composer builds, versioning must be enacted on the repo that deploys to composer. When ready to deploy, create a tag in github up one version from previous, with the starting version being 8.1.0:</p>
<ul>
<li>Minor versions (non breaking changes): 8.1.1, 8.1.2, etc.</li>
<li>Major versions (breaking changes): 8.2.0, 8.3.0, etc.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="packagist">Packagist<a href="#packagist" class="hash-link" aria-label="Direct link to Packagist" title="Direct link to Packagist">​</a></h4>
<p>If this module/theme is to be controlled via composer/packagist:</p>
<ul>
<li>Ensure a proper composer.json is created in the repo.</li>
<li>Create a package for it on packagist.org</li>
<li>Be sure a client contact/it dept/etc has access to the packagist repo as well</li>
<li>Set webhook to deploy to packagist on push, wherever the repo is located.</li>
<li>Note any required drupal modules in the &quot;require&quot; section so they also get added via composer.</li>
<li>Be sure to tag a version number when ready to deploy or update, see versioning notes, but for D8 we prefer 8.1.0, 8.1.1, etc.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="example-composerjson">Example composer.json<a href="#example-composerjson" class="hash-link" aria-label="Direct link to Example composer.json" title="Direct link to Example composer.json">​</a></h5>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;idfive/idfive_paragraphs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;drupal-module&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This module is designed to provide base idfive kitchen sink widgets.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;keywords&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Drupal&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;homepage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://bitbucket.org/idfivellc/idfive-component-library-d8-paragraphs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;license&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;GPL-2.0+&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;authors&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Dan Rogers&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;homepage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://www.drupal.org/u/dan_rogers&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;role&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Maintainer&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;require&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;drupal/external_data_source&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;drupal/link_attributes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;drupal/paragraphs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;drupal/tablefield&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;drupal/viewsreference&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;drupal/webform&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;support&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;issues&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://bitbucket.org/idfivellc/idfive-component-library-d8-paragraphs/issues&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;source&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://bitbucket.org/idfivellc/idfive-component-library-d8-paragraphs&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="php-codesnifferdrupal-coder">PHP CodeSniffer/Drupal Coder<a href="#php-codesnifferdrupal-coder" class="hash-link" aria-label="Direct link to PHP CodeSniffer/Drupal Coder" title="Direct link to PHP CodeSniffer/Drupal Coder">​</a></h4>
<p>Before shipping custom themes and modules, run <a href="https://www.drupal.org/node/1587138" target="_blank" rel="noopener noreferrer">drupal coder</a> in order to fix formatting issues/etc, and to ensure we ship code that matches the drupal coding standard.</p>
<ul>
<li>Install <a href="https://www.drupal.org/node/1419988" target="_blank" rel="noopener noreferrer">drupal coder</a> globally</li>
<li>See <a href="https://www.drupal.org/node/1587138" target="_blank" rel="noopener noreferrer">coder example usage</a> for ideas on how to format/check custom code.</li>
<li>Use phpcs: <code>phpcs --standard=Drupal --extensions=php,module,inc,install,test,profile,theme,css,info,txt,md MY_CUSTOM_MODULE</code> to check</li>
<li>And then automated fixes via phpcbf: <code>phpcbf --standard=Drupal --extensions=php,module,inc,install,test,profile,theme,css,info,txt,md MY_CUSTOM_MODULE</code></li>
<li>Be sure to double check code valitity/etc.</li>
<li>Use <code>--ignore=static</code> to ignore front end code/etc in a theme&#x27;s static folder.</li>
<li>See <a href="https://github.com/squizlabs/PHP_CodeSniffer/wiki/Advanced-Usage" target="_blank" rel="noopener noreferrer">Advanced Usage</a> for ignoring directories/etc.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="drupal-check">Drupal Check<a href="#drupal-check" class="hash-link" aria-label="Direct link to Drupal Check" title="Direct link to Drupal Check">​</a></h4>
<p>Install <a href="https://github.com/mglaman/drupal-check" target="_blank" rel="noopener noreferrer">drupal-check</a>, which will give you the ability to run checks on custom modules/code to ensure you are not using any depreciated D8 functions that will be removed/etc. This static analysis tool will check for correctness (e.g. using a class that doesn&#x27;t exist), deprecation errors, and more.</p>
<ul>
<li>Install locally in lando via composer. <code>lando composer require mglaman/drupal-check --dev</code></li>
<li>Then run via <code>lando php vendor/bin/drupal-check PATH/TO/YOUR/CUSTOM/CODE</code>.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h5>
<ul>
<li><code>lando php vendor/bin/drupal-check -d web/modules/custom/umd_terp_base</code> Check for depreciations in custom module</li>
<li><code>lando php vendor/bin/drupal-check -d web/themes/custom/umd_terp</code> Check for depreciations in custom theme</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eslint">ESLint<a href="#eslint" class="hash-link" aria-label="Direct link to ESLint" title="Direct link to ESLint">​</a></h4>
<p>Generally speaking, we do not usually care about using ESLint for most JS files, as we normally have these going into a theme-based JS file, which has its own linters/builds/etc. If you do need to write vanilla D8 JS for a module, though, this can be a very useful tool to help get JS files to Drupal standards. ESLint is in core, you just need to install it in order to run it against specified files.</p>
<ul>
<li><code>cd core &amp;&amp; yarn install</code></li>
<li><code>core/node_modules/.bin/eslint PATH_TO_YOUR_CUSTOM_JS.js</code></li>
<li><code>core/node_modules/.bin/eslint PATH_TO_YOUR_CUSTOM_JS.js --fix</code></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/idfive/Developer-Documentation/tree/main/docs/back-end/drupal/drupal-sitebuilding.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/back-end/drupal/drupal-simplesamlphp-password-protection"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Simplesamlphp (per page) password protection in drupal</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/back-end/drupal/drupal-social-share"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Drupal Social Share</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general-requirementsbest-practices" class="table-of-contents__link toc-highlight">General Requirements/Best Practices</a><ul><li><a href="#settingsphp" class="table-of-contents__link toc-highlight">settings.php</a></li><li><a href="#servicesyml" class="table-of-contents__link toc-highlight">services.yml</a></li></ul></li><li><a href="#idfive-base-theme" class="table-of-contents__link toc-highlight">idfive base theme</a><ul><li><a href="#idfive-base-theme-via-the-ial" class="table-of-contents__link toc-highlight">idfive base theme via the IAL</a></li></ul></li><li><a href="#idfive-icl-paragraphs-module" class="table-of-contents__link toc-highlight">idfive ICL paragraphs module</a><ul><li><a href="#extending-icl-paragraphs" class="table-of-contents__link toc-highlight">Extending ICL paragraphs</a></li></ul></li><li><a href="#recommended-contrib-modules" class="table-of-contents__link toc-highlight">Recommended contrib modules</a><ul><li><a href="#recommended-contrib-modules-via-the-ial" class="table-of-contents__link toc-highlight">Recommended contrib modules via the IAL</a></li></ul></li><li><a href="#custom-moduletheme-development" class="table-of-contents__link toc-highlight">Custom Module/Theme Development</a><ul><li><a href="#thememodule-best-practices" class="table-of-contents__link toc-highlight">Theme/Module best practices</a></li><li><a href="#prepping-to-shiplaunch" class="table-of-contents__link toc-highlight">Prepping to ship/launch</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 idfive.</div></div></div></footer></div>
</body>
</html>