<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-back-end/drupal/drupal-hybrid-content-types">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Hybrid Content Types | idfive Developer Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developers.idfive.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developers.idfive.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developers.idfive.com/docs/back-end/drupal/drupal-hybrid-content-types"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Hybrid Content Types | idfive Developer Documentation"><meta data-rh="true" name="description" content="Often times, we get asked to create Hybrid content types in drupal. Essentially, a hybrid content type is a content type that:"><meta data-rh="true" property="og:description" content="Often times, we get asked to create Hybrid content types in drupal. Essentially, a hybrid content type is a content type that:"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://developers.idfive.com/docs/back-end/drupal/drupal-hybrid-content-types"><link data-rh="true" rel="alternate" href="https://developers.idfive.com/docs/back-end/drupal/drupal-hybrid-content-types" hreflang="en"><link data-rh="true" rel="alternate" href="https://developers.idfive.com/docs/back-end/drupal/drupal-hybrid-content-types" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://2PJMDLEUFN-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="idfive Developer Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="idfive Developer Documentation Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="idfive Developer Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.b95e3991.css">
<link rel="preload" href="/assets/js/runtime~main.77a71e50.js" as="script">
<link rel="preload" href="/assets/js/main.d7e78353.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-idfive.svg" alt="idfive Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-idfive.svg" alt="idfive Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/category/general">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/general">General</a><button aria-label="Toggle the collapsible sidebar category &#x27;General&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/front-end">Front End</a><button aria-label="Toggle the collapsible sidebar category &#x27;Front End&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/support">Support</a><button aria-label="Toggle the collapsible sidebar category &#x27;Support&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/accelerator">Accelerator</a><button aria-label="Toggle the collapsible sidebar category &#x27;Accelerator&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/back-end">Back End</a><button aria-label="Toggle the collapsible sidebar category &#x27;Back End&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/drupal">Drupal</a><button aria-label="Toggle the collapsible sidebar category &#x27;Drupal&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-caching">Caching in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-config-management">Configuration Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-entities">Entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-entity-queries">Entity queries in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-environment">idfive drupal environment and common setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-feeds">Feeds module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-field-snippets">Drupal Field Snippets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-helpfull-commands">Helpful Drupal Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/back-end/drupal/drupal-hybrid-content-types">Hybrid Content Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-js">Javascript and drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-legacy">Drupal 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-performance">Drupal Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-rest-custom">Custom REST endpoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-services">Drupal 8 Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-seven-migration">Seven to 9 migration locally via lando</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-simple-password-protection">Simple (per page) password protection in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-simplesamlphp-password-protection">Simplesamlphp (per page) password protection in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-sitebuilding">Drupal 8 Site Building</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-social-share">Drupal Social Share</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-testing">Testing in drupal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-updates">Drupal Updates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-users-roles">Drupal Users and Roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal/drupal-views">Drupal Views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/back-end/drupal">Drupal 8 General Codebase</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/php">PHP</a><button aria-label="Toggle the collapsible sidebar category &#x27;PHP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/terminalfour-t4">TerminalFour (T4)</a><button aria-label="Toggle the collapsible sidebar category &#x27;TerminalFour (T4)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/wordpress">Wordpress</a><button aria-label="Toggle the collapsible sidebar category &#x27;Wordpress&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/challenges">Challenges</a><button aria-label="Toggle the collapsible sidebar category &#x27;Challenges&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/back-end"><span itemprop="name">Back End</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/drupal"><span itemprop="name">Drupal</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Hybrid Content Types</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Hybrid Content Types</h1><p>Often times, we get asked to create Hybrid content types in drupal. Essentially, a hybrid content type is a content type that:</p><ul><li>Has a single &quot;source of truth&quot;, that is API based.</li><li>Mirrors &quot;some of this content&quot; locally in drupal.</li><li>Loads more details directly from the API upon full view.</li><li>Has extra fields locally in order to categorize/etc.</li></ul><p>This gives us the benefit of having content locally, in order to add local fields, create views. etc, without trying to map complex fields from the API and duplicate large amounts of data. See a presentation we did on this for <a href="https://www.youtube.com/watch?v=JGKl8VuWA28&amp;list" target="_blank" rel="noopener noreferrer">Drupal Flyover Camp</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-simple-real-world-example">A simple, real world example<a href="#a-simple-real-world-example" class="hash-link" aria-label="Direct link to A simple, real world example" title="Direct link to A simple, real world example">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-overview">The overview<a href="#the-overview" class="hash-link" aria-label="Direct link to The overview" title="Direct link to The overview">​</a></h3><p>A client has an API endpoint for faculty. Each faculty member has a large bio, as well as a publications list that could be 60-100 individual publications, as well as other complex fields. The client also needs to be able to use entity relations to these faculty members from other pieces of content within drupal.</p><p>Since we only need things like photo, name, shortened bio, and some local categorizations in the &quot;all faculty&quot; view, we would rather not spend time and effort adding things like &quot;publications&quot; into the drupal DB, but rather, simply grab them from the API directly when needed, on the detail page. This lets us not duplicate complex content locally, and keeps the &quot;source of truth&quot; as the direct source.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-implementation">The implementation<a href="#the-implementation" class="hash-link" aria-label="Direct link to The implementation" title="Direct link to The implementation">​</a></h3><ul><li>Create a &quot;Faculty Member&quot; content type within drupal.</li><li>Via feeds, pull ID, Image, Name, First Name, Last Name, Department, and shortened version of Bio.</li><li>Set feeds to override these fields when importer runs, so that API is always the source of truth for these fields, regardless if they were ever wrongfully updated locally.</li><li>Lock down editing of these fields, if needed.</li><li>Add local fields to Faculty, for categorization, entity reference, etc. Let admins edit these fields freely.</li><li>Use views or similar, to create filterable view of &quot;all faculty&quot;, using all fields available locally.</li><li>Load publications, full bio, etc directly from API when full faculty profile is viewed.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-overview">Basic overview<a href="#basic-overview" class="hash-link" aria-label="Direct link to Basic overview" title="Direct link to Basic overview">​</a></h2><ul><li>Create shell content type.</li><li>Add fields for Minimum Viable Tracked Content (MVTC) from API, and needed local fields.</li><li>Ingest MVTC into drupal, usually via feeds.</li><li>Use MVTC in teasers/etc throughout site.</li><li>Create Service to pull &quot;Full Content&quot; from respective API, on full node view.</li><li>Configure hook_preprocess, and templates for the &quot;Full Content&quot; view, to also display loaded content from API.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-shell-content-type">Create shell content type<a href="#create-shell-content-type" class="hash-link" aria-label="Direct link to Create shell content type" title="Direct link to Create shell content type">​</a></h2><p>This is essentially the same as any content type. Some things to note:</p><ul><li>Some fields (MVTC fields) will be updated when feeds run, some will not.</li><li>idfive prefers to prefix, and group MVTC fields into a fieldset, or details, or similar. This way we can 1. make it clear that these are off limits to editing, or at least that the potential exists for changes to be overwritten, and 2. Physically hide/control access to that fieldset if required.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ingest-minimum-viable-tracked-content-mvtc-into-drupal">Ingest Minimum Viable Tracked Content (MVTC) into drupal<a href="#ingest-minimum-viable-tracked-content-mvtc-into-drupal" class="hash-link" aria-label="Direct link to Ingest Minimum Viable Tracked Content (MVTC) into drupal" title="Direct link to Ingest Minimum Viable Tracked Content (MVTC) into drupal">​</a></h2><p>It is important to note here, that MVTC varies per project, and even different cont types within a project. Usually, the desired number of fields is &quot;as little as possible&quot;. A good start is to look and see what fields are needed in teasers throughout your site, and start there. Essentially, we do not want to go to the API every time a piece of content shows up in a view or search result, so we want that content to be local.</p><p>Additionally, besides visible fields, we need to store some sort of unique ID for each piece of content, that we can send to the API and return &quot;Full Data&quot; for that content.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ingest-mvtc-into-drupal">Ingest MVTC into drupal<a href="#ingest-mvtc-into-drupal" class="hash-link" aria-label="Direct link to Ingest MVTC into drupal" title="Direct link to Ingest MVTC into drupal">​</a></h2><p>There are many ways to ingest content into D8/9, one of the simplest is to use the <a href="https://www.drupal.org/project/feeds" target="_blank" rel="noopener noreferrer">feeds module</a>. The loose idea, is to set up feeds to ingests MVTC into drupal on a regular basis, so that MVTC is kept up to date with the API.</p><p>Exact implementation is based on the endpoint for the API being ingested, but options exist for xml/json/etc. Custom fetchers can also be created if things like keys/etc need to be passed to the API.</p><p>In an ideal world, all MVTC would be returned in a single endpoint, if not, a loop will/would have to be done in order to get MVTC. This could be accomplished via a custom feeds parser, and a custom service.</p><ul><li>Create custom Service to load content by ID.</li><li>Create custom feeds parser.</li><li>In parser, load service, passing ID, and get desired data.</li><li>Adjust feed to use available data.</li></ul><p>While this is obviously less ideal, since it is usually on cron, it is not the end of the world performance wise either.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-mvtc-in-teaserssearchetc-throughout-the-site">Use MVTC in teasers/search/etc throughout the site<a href="#use-mvtc-in-teaserssearchetc-throughout-the-site" class="hash-link" aria-label="Direct link to Use MVTC in teasers/search/etc throughout the site" title="Direct link to Use MVTC in teasers/search/etc throughout the site">​</a></h2><p>An important thing to remember here, is that for hybrid content types, we have essentially two sources:</p><ul><li>Local content (MVTC)</li><li>Full content, loaded via API for full views only.</li></ul><p>What this means is that if you are displaying a list of something like teasers in a view, all fields/etc need to be against local (MVTC) fields. The exception to that would be potentially for search, if using search API, you could have it index fully rendered content which would load API data, at the expense of performance, potentially.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-service-to-pull-full-content-from-respective-api-on-full-node-view">Create Service to pull &quot;Full Content&quot; from respective API, on full node view<a href="#create-service-to-pull-full-content-from-respective-api-on-full-node-view" class="hash-link" aria-label="Direct link to Create Service to pull &quot;Full Content&quot; from respective API, on full node view" title="Direct link to Create Service to pull &quot;Full Content&quot; from respective API, on full node view">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-service-example">Simple service example<a href="#simple-service-example" class="hash-link" aria-label="Direct link to Simple service example" title="Direct link to Simple service example">​</a></h3><p>See <a href="/docs/back-end/drupal/drupal-services">Drupal Services</a> section of this site for more details on setting up a custom service.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Drupal\MY_MODULE\Services;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use GuzzleHttp\Client;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use GuzzleHttp\Exception\RequestException;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Class MyCustomService.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class MyCustomService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   * @var GuzzleHttp\Client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  protected $client;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   * Constructs a new MyCustomService object.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public function __construct(Client $client) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $this-&gt;client = $client;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   * Public method to return a single point of data from the API.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public function getDetail($id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $url = &#x27;http://MY_API_URL/&#x27; . $id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $json = $this-&gt;getData($url);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $json;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   * Public method to get content from API.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public function getData($url) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $request = $this-&gt;client-&gt;get($url);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $result = json_decode($request-&gt;getBody()-&gt;__toString(), TRUE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catch (RequestException $e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $message = &#x27;Error connecting to APL API via URL:&#x27; . $url;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      \Drupal::logger(&#x27;My Custom Service&#x27;)-&gt;error($message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-hook_preprocess-and-templates-for-the-full-content-view-to-also-display-loaded-content-from-api">Configure hook_preprocess, and templates for the &quot;Full Content&quot; view, to also display loaded content from API<a href="#configure-hook_preprocess-and-templates-for-the-full-content-view-to-also-display-loaded-content-from-api" class="hash-link" aria-label="Direct link to Configure hook_preprocess, and templates for the &quot;Full Content&quot; view, to also display loaded content from API" title="Direct link to Configure hook_preprocess, and templates for the &quot;Full Content&quot; view, to also display loaded content from API">​</a></h2><p>Add hook in custom module or theme. Node example shown, but could also be a different entity type, if desired.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-hook-to-get-content-on-node-view">Simple hook to get content on node view<a href="#simple-hook-to-get-content-on-node-view" class="hash-link" aria-label="Direct link to Simple hook to get content on node view" title="Direct link to Simple hook to get content on node view">​</a></h3><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function MY_MODULE_preprocess_node(&amp;$variables) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $node = $variables[&#x27;elements&#x27;][&#x27;#node&#x27;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $view_mode = $variables[&#x27;view_mode&#x27;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $bundle = $node-&gt;bundle();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $nid = $node-&gt;id();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Target bundle only.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ($bundle == &#x27;DESIRED_HYBRID_BUNDLE&#x27;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Full view of node only.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ($view_mode == &#x27;full&#x27;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $id = $node-&gt;FIELD_YOUR_UNIQUE_ID-&gt;value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $full_data = \Drupal::service(&#x27;MY_MODULE.GENERAL&#x27;)-&gt;getDetail($id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Parse full return here if needed/desired.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $variables[&#x27;MY_DATA&#x27;] = $full_data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-your-variable-in-twig">Use your variable in twig<a href="#use-your-variable-in-twig" class="hash-link" aria-label="Direct link to Use your variable in twig" title="Direct link to Use your variable in twig">​</a></h3><p>Once the hook runs, <code>MY_DATA</code> is available as a variable in the node twig template, upon full view.</p><div class="language-twig codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-twig codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{# Use some fields directly #}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{{ MY_DATA.FIELD_RETURNED_IN_JSON }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{# Use complex objects in a loop #}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% for data in MY_DATA.OBJ_RETURNED_IN_JSON %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {{ data.SUB_OBJ_RETURNED_IN_JSON_FIELD }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endfor %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/back-end/drupal/drupal-hybrid-content-types.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/back-end/drupal/drupal-helpfull-commands"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Helpful Drupal Commands</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/back-end/drupal/drupal-js"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Javascript and drupal</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-simple-real-world-example" class="table-of-contents__link toc-highlight">A simple, real world example</a><ul><li><a href="#the-overview" class="table-of-contents__link toc-highlight">The overview</a></li><li><a href="#the-implementation" class="table-of-contents__link toc-highlight">The implementation</a></li></ul></li><li><a href="#basic-overview" class="table-of-contents__link toc-highlight">Basic overview</a></li><li><a href="#create-shell-content-type" class="table-of-contents__link toc-highlight">Create shell content type</a></li><li><a href="#ingest-minimum-viable-tracked-content-mvtc-into-drupal" class="table-of-contents__link toc-highlight">Ingest Minimum Viable Tracked Content (MVTC) into drupal</a></li><li><a href="#ingest-mvtc-into-drupal" class="table-of-contents__link toc-highlight">Ingest MVTC into drupal</a></li><li><a href="#use-mvtc-in-teaserssearchetc-throughout-the-site" class="table-of-contents__link toc-highlight">Use MVTC in teasers/search/etc throughout the site</a></li><li><a href="#create-service-to-pull-full-content-from-respective-api-on-full-node-view" class="table-of-contents__link toc-highlight">Create Service to pull &quot;Full Content&quot; from respective API, on full node view</a><ul><li><a href="#simple-service-example" class="table-of-contents__link toc-highlight">Simple service example</a></li></ul></li><li><a href="#configure-hook_preprocess-and-templates-for-the-full-content-view-to-also-display-loaded-content-from-api" class="table-of-contents__link toc-highlight">Configure hook_preprocess, and templates for the &quot;Full Content&quot; view, to also display loaded content from API</a><ul><li><a href="#simple-hook-to-get-content-on-node-view" class="table-of-contents__link toc-highlight">Simple hook to get content on node view</a></li><li><a href="#use-your-variable-in-twig" class="table-of-contents__link toc-highlight">Use your variable in twig</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 idfive.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.77a71e50.js"></script>
<script src="/assets/js/main.d7e78353.js"></script>
</body>
</html>