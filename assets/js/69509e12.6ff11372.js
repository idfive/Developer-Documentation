"use strict";(self.webpackChunkidfive_docs=self.webpackChunkidfive_docs||[]).push([[4892],{2010:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"accelerator/unical","title":"Unical","description":"Unical Drupal Calendar","source":"@site/docs/accelerator/05-unical.md","sourceDirName":"accelerator","slug":"/accelerator/unical","permalink":"/docs/accelerator/unical","draft":false,"unlisted":false,"editUrl":"https://github.com/idfive/Developer-Documentation/tree/main/docs/accelerator/05-unical.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"description":"Unical Drupal Calendar"},"sidebar":"tutorialSidebar","previous":{"title":"Site Options","permalink":"/docs/accelerator/site-options"},"next":{"title":"idfive Component Library (ICL)","permalink":"/docs/accelerator/icl"}}');var l=i(4848),s=i(8453),a=i(5537),t=i(9329);const o={description:"Unical Drupal Calendar"},d="Unical",c={},u=[{value:"Design Resources",id:"design-resources",level:2},{value:"Month View \u2013 FullCalendar Integration",id:"month-view--fullcalendar-integration",level:2},{value:"Features Used",id:"features-used",level:3},{value:"Vue Integration",id:"vue-integration",level:2},{value:"Plugins Enabled",id:"plugins-enabled",level:2},{value:"Accessibility Fixes",id:"accessibility-fixes",level:2},{value:"Styling and Behavior",id:"styling-and-behavior",level:2},{value:"Developer Notes",id:"developer-notes",level:2},{value:"Multi-Day Event Positioning Behavior",id:"multi-day-event-positioning-behavior",level:3},{value:"Issue Description",id:"issue-description",level:4},{value:"Cause",id:"cause",level:4},{value:"Screenshot Example",id:"screenshot-example",level:2},{value:"Recommendation",id:"recommendation",level:4},{value:"Console Error \u2013 <code>dayIndex</code>",id:"console-error--dayindex",level:3},{value:"Error",id:"error",level:4},{value:"Cause",id:"cause-1",level:4},{value:"Recommendation",id:"recommendation-1",level:4},{value:"List View \u2013 Vue + VCalendar Integration",id:"list-view--vue--vcalendar-integration",level:2},{value:"Key Features",id:"key-features",level:3},{value:"Components Involved",id:"components-involved",level:3},{value:"Plugin References",id:"plugin-references",level:2},{value:"Developer Resources",id:"developer-resources",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"unical",children:"Unical"})}),"\n",(0,l.jsx)(n.p,{children:"Overview of Unical"}),"\n",(0,l.jsx)(n.p,{children:"This Unical includes two integrated calendar views powered by FullCalendar and custom Vue.js components:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Month View"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"List View"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"design-resources",children:"Design Resources"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"https://www.figma.com/proto/J3ysB89ldPIQO0LTADpUaf/%F0%9F%8F%83%E2%80%8D%E2%99%80%EF%B8%8F-Accelerator-Wireframes?page-id=1%3A98&node-id=4061-16966&p=f&viewport=161%2C257%2C0.02&t=OerC0i33QOF5IPYb-1&scaling=min-zoom&content-scaling=fixed&starting-point-node-id=355%3A13806",children:"UniCal Prototype"})})," - Interactive prototype showing UniCal functionality and design patterns"]}),"\n"]}),"\n",(0,l.jsxs)(a.A,{groupId:"calendar-views",children:[(0,l.jsxs)(t.A,{value:"month",label:"Month View",default:!0,children:[(0,l.jsx)(n.h2,{id:"month-view--fullcalendar-integration",children:"Month View \u2013 FullCalendar Integration"}),(0,l.jsxs)(n.p,{children:["The Unical project integrates the ",(0,l.jsx)(n.a,{href:"https://fullcalendar.io/",children:"FullCalendar"})," JavaScript library to manage and render calendar views. FullCalendar is a powerful and flexible plugin used for event scheduling and display. The Premium version of FullCalendar is used in this project, activated via a license key stored in the ",(0,l.jsx)(n.code,{children:"mini-calendar-month.vue"})," file."]}),(0,l.jsx)(n.h3,{id:"features-used",children:"Features Used"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"dayGridMonth View"}),": Displays events in a full-month grid layout."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Custom Event Rendering"}),": Custom logic is applied using ",(0,l.jsx)(n.code,{children:"eventContent"}),' to conditionally render event titles and times, including a "+X more" indicator when a day has more than three events.']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Multi-day Event Support"}),": Events spanning multiple days are tracked and rendered across the relevant days."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dynamic Loading"}),": Events are dynamically fetched from a Drupal backend using a REST API, based on the current visible date range."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Accessibility Enhancements"}),": Roles and attributes are updated on mount to ensure the calendar meets WCAG 2.1 standards."]}),"\n"]}),(0,l.jsx)(n.h2,{id:"vue-integration",children:"Vue Integration"}),(0,l.jsx)(n.p,{children:"FullCalendar is imported as a Vue 3 component:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'import FullCalendar from "@fullcalendar/vue3";\n'})}),(0,l.jsx)(n.p,{children:"And rendered using:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-html",children:'<FullCalendar :options="calendarOptions" ref="fullCalendar" />\n'})}),(0,l.jsxs)(n.p,{children:["The calendar configuration is managed through the ",(0,l.jsx)(n.code,{children:"calendarOptions"})," object."]}),(0,l.jsx)(n.h2,{id:"plugins-enabled",children:"Plugins Enabled"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"dayGridPlugin"}),": Renders the month view."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"interactionPlugin"}),": Enables user interaction like event clicks."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"resourceTimelinePlugin"}),": Included for potential future use (not enabled by default in UI)."]}),"\n"]}),(0,l.jsx)(n.h2,{id:"accessibility-fixes",children:"Accessibility Fixes"}),(0,l.jsxs)(n.p,{children:["Accessibility improvements are made in the ",(0,l.jsx)(n.code,{children:"mounted()"})," lifecycle hook:"]}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Removing invalid or unnecessary ARIA roles (e.g., ",(0,l.jsx)(n.code,{children:'role="presentation"'}),")."]}),"\n",(0,l.jsxs)(n.li,{children:["Ensuring each ",(0,l.jsx)(n.code,{children:"<th>"})," has ",(0,l.jsx)(n.code,{children:'scope="col"'})," and ",(0,l.jsx)(n.code,{children:'role="columnheader"'}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Adding ",(0,l.jsx)(n.code,{children:"headers"})," attributes to ",(0,l.jsx)(n.code,{children:"<td>"})," cells to associate them with the correct headers."]}),"\n"]}),(0,l.jsx)(n.h2,{id:"styling-and-behavior",children:"Styling and Behavior"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Events are styled with transparent backgrounds and borders."}),"\n",(0,l.jsx)(n.li,{children:'The "+X more" button appears on days that have more than three single-day events.'}),"\n",(0,l.jsx)(n.li,{children:'Clicking "+X more" expands the day to reveal all events.'}),"\n",(0,l.jsxs)(n.li,{children:["Event links open in a new tab via ",(0,l.jsx)(n.code,{children:"window.open()"}),"."]}),"\n"]}),(0,l.jsx)(n.hr,{}),(0,l.jsx)(n.h2,{id:"developer-notes",children:"Developer Notes"}),(0,l.jsx)(n.h3,{id:"multi-day-event-positioning-behavior",children:"Multi-Day Event Positioning Behavior"}),(0,l.jsxs)(n.p,{children:["By default, FullCalendar tries to group ",(0,l.jsx)(n.strong,{children:"multi-day events at the top"})," of the day cell. However, inconsistencies may appear if a single-day event is rendered before a multi-day event or when layout spacing allows it to break the stacking order."]}),(0,l.jsx)(n.h4,{id:"issue-description",children:"Issue Description"}),(0,l.jsxs)(n.p,{children:["In some cases, like the screenshot below, the single-day event ",(0,l.jsx)(n.code,{children:'"TEST Event 21"'})," is rendered above the multi-day event ",(0,l.jsx)(n.code,{children:'"TEST Event 35"'}),", which breaks the expected stacking order."]}),(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"This is not a bug in the code, but a limitation of the FullCalendar layout engine."}),"\n"]}),(0,l.jsx)(n.h4,{id:"cause",children:"Cause"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"FullCalendar handles event stacking based on internal render timing and row space."}),"\n",(0,l.jsxs)(n.li,{children:["Multi-day events are ",(0,l.jsx)(n.strong,{children:"not guaranteed"})," to appear above single-day events if spacing is broken by DOM structure or timing."]}),"\n"]}),(0,l.jsx)(n.h2,{id:"screenshot-example",children:"Screenshot Example"}),(0,l.jsx)(n.p,{children:"Below is an example screenshot showing stacked events:"}),(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"Multi-Day Event Example",src:i(6554).A+"",width:"1474",height:"902"})}),(0,l.jsx)(n.h4,{id:"recommendation",children:"Recommendation"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No immediate fix is needed unless UX requires strict multi-day-first display."}),"\n",(0,l.jsxs)(n.li,{children:["Optional workarounds:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"eventOrder"})," to manually sort."]}),"\n",(0,l.jsxs)(n.li,{children:["Customize ",(0,l.jsx)(n.code,{children:"eventDidMount()"})," to apply DOM reorder logic."]}),"\n"]}),"\n"]}),"\n"]}),(0,l.jsx)(n.hr,{}),(0,l.jsxs)(n.h3,{id:"console-error--dayindex",children:["Console Error \u2013 ",(0,l.jsx)(n.code,{children:"dayIndex"})]}),(0,l.jsx)(n.h4,{id:"error",children:"Error"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"TypeError: Cannot read properties of undefined (reading 'dayIndex')\n"})}),(0,l.jsx)(n.p,{children:"This may appear in the console when a user clicks on any day in the mini calendar."}),(0,l.jsx)(n.h4,{id:"cause-1",children:"Cause"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The issue is related to VCalendar or Nuxt UI\u2019s internal logic."}),"\n",(0,l.jsxs)(n.li,{children:["It was previously tracked and closed in this GitHub issue:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/nuxt/ui/issues/2208",children:"Nuxt UI Issue #2208"})}),"\n"]}),"\n"]}),"\n"]}),(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\u26a0\ufe0f The fix proposed in that issue does ",(0,l.jsx)(n.strong,{children:"not"})," resolve the error in calendar modals."]}),"\n"]}),(0,l.jsx)(n.h4,{id:"recommendation-1",children:"Recommendation"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["This error does ",(0,l.jsx)(n.strong,{children:"not break"})," the calendar or impact functionality."]}),"\n"]})]}),(0,l.jsxs)(t.A,{value:"list",label:"List View",children:[(0,l.jsx)(n.h2,{id:"list-view--vue--vcalendar-integration",children:"List View \u2013 Vue + VCalendar Integration"}),(0,l.jsx)(n.p,{children:"The list view provides an accessible and mobile-friendly way to view events using filters, search, and pagination. This view is fully dynamic and works in conjunction with the month view."}),(0,l.jsx)(n.h3,{id:"key-features",children:"Key Features"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dynamic Filtering"}),": Category-based filters appear in a modal and collapse components."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Date Selection"}),": A VCalendar date picker enables choosing a specific day."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Search Integration"}),": Search input triggers API queries based on date and filters."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Pagination"}),": Results are paged with next/prev/first/last controls."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"No Results Handling"}),': Custom "No Events Found" messages based on state (filters/search/month).']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"View Toggling"}),": Users can toggle between list and month views using provided buttons."]}),"\n"]}),(0,l.jsx)(n.h3,{id:"components-involved",children:"Components Involved"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mini-calendar-events.vue"}),': Renders the list of events and "no results" message.']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mini-calendar-search.vue"}),": Handles event search input."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mini-calendar-filtermodal.vue"}),": Filter modal for category/date filters."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mini-calendar-calendar.vue"}),": VCalendar wrapper for inline date picker and selection logic."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"mini-calendar-pool.vue"}),': UI for "Reset All" and filter badges.']}),"\n"]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"plugin-references",children:"Plugin References"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://fullcalendar.io/docs",children:"FullCalendar Documentation"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/fullcalendar/fullcalendar",children:"FullCalendar GitHub Repository"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://vcalendar.io/",children:"VCalendar Documentation"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/nathanreyes/v-calendar",children:"VCalendar GitHub Repository"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"developer-resources",children:"Developer Resources"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://dev-idfive-drupal-calendar.pantheonsite.io/events",children:"Internal Dev Site"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},5537:(e,n,i)=>{i.d(n,{A:()=>w});var r=i(6540),l=i(4164),s=i(5627),a=i(6347),t=i(372),o=i(604),d=i(1861),c=i(8749);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:i}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:i,attributes:r,default:l}}=e;return{value:n,label:i,attributes:r,default:l}}))}(i);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,i])}function p(e){let{value:n,tabValues:i}=e;return i.some((e=>e.value===n))}function v(e){let{queryString:n=!1,groupId:i}=e;const l=(0,a.W6)(),s=function(e){let{queryString:n=!1,groupId:i}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:n,groupId:i});return[(0,o.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(l.location.search);n.set(s,e),l.replace({...l.location,search:n.toString()})}),[s,l])]}function x(e){const{defaultValue:n,queryString:i=!1,groupId:l}=e,s=h(e),[a,o]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${i.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=i.find((e=>e.default))??i[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[d,u]=v({queryString:i,groupId:l}),[x,m]=function(e){let{groupId:n}=e;const i=function(e){return e?`docusaurus.tab.${e}`:null}(n),[l,s]=(0,c.Dv)(i);return[l,(0,r.useCallback)((e=>{i&&s.set(e)}),[i,s])]}({groupId:l}),j=(()=>{const e=d??x;return p({value:e,tabValues:s})?e:null})();(0,t.A)((()=>{j&&o(j)}),[j]);return{selectedValue:a,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),m(e)}),[u,m,s]),tabValues:s}}var m=i(9136);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=i(4848);function f(e){let{className:n,block:i,selectedValue:r,selectValue:a,tabValues:t}=e;const o=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.a_)(),c=e=>{const n=e.currentTarget,i=o.indexOf(n),l=t[i].value;l!==r&&(d(n),a(l))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const i=o.indexOf(e.currentTarget)+1;n=o[i]??o[0];break}case"ArrowLeft":{const i=o.indexOf(e.currentTarget)-1;n=o[i]??o[o.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":i},n),children:t.map((e=>{let{value:n,label:i,attributes:s}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{o.push(e)},onKeyDown:u,onClick:c,...s,className:(0,l.A)("tabs__item",j.tabItem,s?.className,{"tabs__item--active":r===n}),children:i??n},n)}))})}function b(e){let{lazy:n,children:i,selectedValue:s}=e;const a=(Array.isArray(i)?i:[i]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=x(e);return(0,g.jsxs)("div",{className:(0,l.A)("tabs-container",j.tabList),children:[(0,g.jsx)(f,{...n,...e}),(0,g.jsx)(b,{...n,...e})]})}function w(e){const n=(0,m.A)();return(0,g.jsx)(y,{...e,children:u(e.children)},String(n))}},6554:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/multi-day-event-4b523090d27639f184a5c6ed6a4396a3.png"},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>t});var r=i(6540);const l={},s=r.createContext(l);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),r.createElement(s.Provider,{value:n},e.children)}},9329:(e,n,i)=>{i.d(n,{A:()=>a});i(6540);var r=i(4164);const l={tabItem:"tabItem_Ymn6"};var s=i(4848);function a(e){let{children:n,hidden:i,className:a}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(l.tabItem,a),hidden:i,children:n})}}}]);