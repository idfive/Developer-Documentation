"use strict";(self.webpackChunkidfive_docs=self.webpackChunkidfive_docs||[]).push([[5593],{3905:(e,a,t)=>{t.d(a,{Zo:()=>o,kt:()=>h});var l=t(7294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,l)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,l,n=function(e,a){if(null==e)return{};var t,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)t=r[l],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)t=r[l],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=l.createContext({}),u=function(e){var a=l.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},o=function(e){var a=u(e.components);return l.createElement(s.Provider,{value:a},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return l.createElement(l.Fragment,{},a)}},m=l.forwardRef((function(e,a){var t=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,o=p(e,["components","mdxType","originalType","parentName"]),d=u(t),m=n,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||r;return t?l.createElement(h,i(i({ref:a},o),{},{components:t})):l.createElement(h,i({ref:a},o))}));function h(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=t.length,i=new Array(r);i[0]=m;var p={};for(var s in a)hasOwnProperty.call(a,s)&&(p[s]=a[s]);p.originalType=e,p[d]="string"==typeof e?e:n,i[1]=p;for(var u=2;u<r;u++)i[u]=t[u];return l.createElement.apply(null,i)}return l.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7854:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>p,toc:()=>u});var l=t(7462),n=(t(7294),t(3905));const r={},i="Helpful Drupal Commands",p={unversionedId:"back-end/drupal/drupal-helpfull-commands",id:"back-end/drupal/drupal-helpfull-commands",title:"Helpful Drupal Commands",description:"Templating",source:"@site/docs/back-end/drupal/drupal-helpfull-commands.md",sourceDirName:"back-end/drupal",slug:"/back-end/drupal/drupal-helpfull-commands",permalink:"/docs/back-end/drupal/drupal-helpfull-commands",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/back-end/drupal/drupal-helpfull-commands.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Drupal Field Snippets",permalink:"/docs/back-end/drupal/drupal-field-snippets"},next:{title:"Hybrid Content Types",permalink:"/docs/back-end/drupal/drupal-hybrid-content-types"}},s={},u=[{value:"Templating",id:"templating",level:2},{value:"Reveal all variables in a twig template",id:"reveal-all-variables-in-a-twig-template",level:3},{value:"Dump",id:"dump",level:4},{value:"Devel",id:"devel",level:4},{value:"In twig template",id:"in-twig-template",level:5},{value:"In a hook_preprocess",id:"in-a-hook_preprocess",level:5},{value:"Xdebug",id:"xdebug",level:4},{value:"Patching",id:"patching",level:2},{value:"Apply a patch",id:"apply-a-patch",level:3},{value:"Create a patch",id:"create-a-patch",level:3},{value:"Drush",id:"drush",level:2},{value:"Show available aliases",id:"show-available-aliases",level:3},{value:"@sites",id:"sites",level:3},{value:"Upload a DB",id:"upload-a-db",level:3},{value:"Create a user and assign as admin",id:"create-a-user-and-assign-as-admin",level:3},{value:"Drush 8",id:"drush-8",level:4},{value:"Drush 9",id:"drush-9",level:4},{value:"Partial configuration installs",id:"partial-configuration-installs",level:3},{value:"Composer",id:"composer",level:2},{value:"Helpful composer commands",id:"helpful-composer-commands",level:3},{value:"Update drupal core",id:"update-drupal-core",level:3}],o={toc:u},d="wrapper";function c(e){let{components:a,...t}=e;return(0,n.kt)(d,(0,l.Z)({},o,t,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"helpful-drupal-commands"},"Helpful Drupal Commands"),(0,n.kt)("h2",{id:"templating"},"Templating"),(0,n.kt)("h3",{id:"reveal-all-variables-in-a-twig-template"},"Reveal all variables in a twig template"),(0,n.kt)("h4",{id:"dump"},"Dump"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Be sure local development settings are set up, so twig will use dump"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"{{ dump(_context|keys) }}")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"{{ dump(variable_key_name) }}"))),(0,n.kt)("h4",{id:"devel"},"Devel"),(0,n.kt)("h5",{id:"in-twig-template"},"In twig template"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Be sure ",(0,n.kt)("a",{parentName:"li",href:"https://www.drupal.org/project/devel"},"devel module")," is installed and enabled."),(0,n.kt)("li",{parentName:"ul"},"Be sure kint submodule enabled."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"{{ kint(_context|keys) }}")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"{{ kint(variable_key_name) }}"))),(0,n.kt)("h5",{id:"in-a-hook_preprocess"},"In a hook_preprocess"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Be sure ",(0,n.kt)("a",{parentName:"li",href:"https://www.drupal.org/project/devel"},"devel module")," is installed and enabled."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"dsm(MY_VAR);")," from within the function.")),(0,n.kt)("h4",{id:"xdebug"},"Xdebug"),(0,n.kt)("p",null,"If running xdebug, you can use a preprocess function to set a breakpoint:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-php"},"function MY_THEME_preprocess(&$variables, $hook) {\n  if ($hook == 'node') {\n    xdebug_break();\n  }\n}\n")),(0,n.kt)("h2",{id:"patching"},"Patching"),(0,n.kt)("h3",{id:"apply-a-patch"},"Apply a patch"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"cd THE_MODULE_TO_PATCH")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"curl -O https://drupal.org/files/THE_PATCH.patch")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"git apply -v THE_PATCH.patch")),(0,n.kt)("li",{parentName:"ul"},"if the git apply doesn't work, use ",(0,n.kt)("inlineCode",{parentName:"li"},"patch -p1 < THE_PATCH.patch"))),(0,n.kt)("h3",{id:"create-a-patch"},"Create a patch"),(0,n.kt)("p",null,"See more detailed information on ",(0,n.kt)("a",{parentName:"p",href:"https://www.drupal.org/node/707484"},"Making a Drupal patch with Git"),"."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"git diff > DRUPAL.ORG_ISSUE_NUMBER-descriptive-text-here.patch"))),(0,n.kt)("h2",{id:"drush"},"Drush"),(0,n.kt)("h3",{id:"show-available-aliases"},"Show available aliases"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush sa")),(0,n.kt)("li",{parentName:"ul"},"Update acquia aliases: ",(0,n.kt)("inlineCode",{parentName:"li"},"drush acquia-update"))),(0,n.kt)("h3",{id:"sites"},"@sites"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"@sites"),' command is especially useful on acquia multi-sites, as it targets "All Sites" on the install. This command needs to be run directly on the desired server however, as it does not play nice with drush aliases.'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush @DESIRED_DRUSH_ALIAS ssh")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush @sites cr"))),(0,n.kt)("h3",{id:"upload-a-db"},"Upload a DB"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush @DESIRED_DRUSH_ALIAS sql-drop")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush @DESIRED_DRUSH_ALIAS < sppnew8t_dev_2019-01-31.sql"))),(0,n.kt)("h3",{id:"create-a-user-and-assign-as-admin"},"Create a user and assign as admin"),(0,n.kt)("p",null,"This is extremely helpful if admin account credentials are lost or unavailable, but server/codebase access is present. To note, special chars are not available when setting passwords for tis, due to a ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/drush-ops/drush/issues/125"},"known drush issue"),"."),(0,n.kt)("h4",{id:"drush-8"},"Drush 8"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush @DESIRED_DRUSH_ALIAS user-create USERNAME")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush @DESIRED_DRUSH_ALIAS user-password USERNAME --password=PASSWORD")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'drush @DESIRED_DRUSH_ALIAS user-add-role "administrator" --name=USERNAME'))),(0,n.kt)("h4",{id:"drush-9"},"Drush 9"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'drush user:create USERNAME --mail="EMAIL" --password="PASSWORD"')),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},'drush user:role:add "administrator" USERNAME'))),(0,n.kt)("h3",{id:"partial-configuration-installs"},"Partial configuration installs"),(0,n.kt)("p",null,"This is helpful in certain instances to update a single config across all sites in say a multi-site. In acquia/others, needs to be run directly on server, not via drush aliases, as the @sites does not play nice with aliases."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush @DESIRED_DRUSH_ALIAS ssh")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush @sites cim --partial --source=modules/contrib/PATH/TO/YOUR/CONFIG_FILE.yml")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"drush @sites updb"))),(0,n.kt)("h2",{id:"composer"},"Composer"),(0,n.kt)("h3",{id:"helpful-composer-commands"},"Helpful composer commands"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"composer clearcache")," clears local composer caches if you just pushed an update to composer repo and need to pull it."),(0,n.kt)("li",{parentName:"ul"},"If you want to know all packages that will be updated by the update command, use the ",(0,n.kt)("inlineCode",{parentName:"li"},"--dry-run")," option first.")),(0,n.kt)("h3",{id:"update-drupal-core"},"Update drupal core"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"composer update drupal/core --with-dependencies")),(0,n.kt)("li",{parentName:"ul"},"See ",(0,n.kt)("a",{parentName:"li",href:"https://www.drupal.org/docs/8/update/update-core-via-composer"},"Update core via composer"),".")))}c.isMDXComponent=!0}}]);